{"ast":null,"code":"import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n  const {\n    tickets\n  } = ticketList;\n  return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n};\n\nconst defaultState = {\n  currency: \"USD\",\n  tickets: [...getDefaultTickets()],\n  filters: [{\n    title: 0,\n    completed: false,\n    id: 1\n  }, {\n    title: 1,\n    completed: false,\n    id: 2\n  }, {\n    title: 2,\n    completed: false,\n    id: 3\n  }, {\n    title: 3,\n    completed: false,\n    id: 4\n  }]\n};\n\nfunction currencyReducer(state = defaultState, action, {\n  id\n}) {\n  console.log('REDUCER', state, action);\n\n  switch (action.type) {\n    case actionNames.CURRENCY_CHANGE:\n      const {\n        currencyName\n      } = action;\n      let tickets = [...getDefaultTickets()];\n\n      if (currencyName === \"USD\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 76)\n        }));\n      } else if (currencyName === \"EUR\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 86)\n        }));\n      }\n\n      return { ...state,\n        currency: currencyName,\n        tickets\n      };\n\n    case actionNames.FILTERS:\n      const {\n        filterName\n      } = action;\n      const newFilters = [...state.filters, filterName];\n      filters = state.filters.map(item => {\n        if (item.id === id) {\n          item.complited = !item.complited;\n        }\n\n        return item;\n      }); // const ticketsFilter = state.tickets.filter((ticket) => {\n      //     return newFilters.some(filter => filter === ticket.stops)\n      // });\n      // if (filterName === \"NON STOPS\") {\n      //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 0}))\n      // } else if (filterName === \"1 STOP\") {\n      //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 1}))\n      // } else if (filterName === \"2 STOPS\") {\n      //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 2}))\n      // } else if (filterName === \"3 STOPS\") {\n      //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 3}))\n      // }\n\n      return { ...state,\n        filters: newFilters\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default currencyReducer;","map":{"version":3,"sources":["/home/smissuser21/React_Project/aviasales/avias/src/Redux/currencyReducer.js"],"names":["actionNames","ticketList","getDefaultTickets","tickets","sort","a","b","price","defaultState","currency","filters","title","completed","id","currencyReducer","state","action","console","log","type","CURRENCY_CHANGE","currencyName","map","ticket","Math","trunc","FILTERS","filterName","newFilters","item","complited"],"mappings":"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","sourcesContent":["import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n    const { tickets } = ticketList;\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n}\n\nconst defaultState = {\n    currency: \"USD\",\n    tickets: [...getDefaultTickets()],\n    filters: [\n        { title: 0, completed: false, id: 1 },\n        { title: 1, completed: false, id: 2 },\n        { title: 2, completed: false, id: 3 },\n        { title: 3, completed: false, id: 4 },\n    ]\n}\n\nfunction currencyReducer (state = defaultState, action, {id}) {\n    console.log('REDUCER', state, action);\n    switch(action.type) {\n        case actionNames.CURRENCY_CHANGE:\n            const { currencyName } = action;\n            let tickets = [...getDefaultTickets()];\n            if (currencyName === \"USD\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 76)}))\n            } else if (currencyName === \"EUR\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 86)}))\n            }\n            return {...state, currency: currencyName, tickets }\n        \n        case actionNames.FILTERS: \n            const { filterName } = action;\n            const newFilters = [...state.filters, filterName];\n            \n            filters = state.filters.map(item => {\n                if(item.id === id) {\n                    item.complited = !item.complited\n                }\n                return item\n            })\n\n\n            // const ticketsFilter = state.tickets.filter((ticket) => {\n            //     return newFilters.some(filter => filter === ticket.stops)\n            // });\n            \n\n\n            // if (filterName === \"NON STOPS\") {\n            //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 0}))\n            // } else if (filterName === \"1 STOP\") {\n            //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 1}))\n            // } else if (filterName === \"2 STOPS\") {\n            //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 2}))\n            // } else if (filterName === \"3 STOPS\") {\n            //     tickets = tickets.filter((ticket) => ({...ticket, stops: ticket.stops === 3}))\n            // }\n\n\n            return {...state, filters: newFilters}\n        \n        default:\n            return {...state};  \n    }\n}\n\nexport default currencyReducer;"]},"metadata":{},"sourceType":"module"}