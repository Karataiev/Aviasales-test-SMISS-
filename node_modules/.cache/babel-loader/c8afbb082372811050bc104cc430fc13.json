{"ast":null,"code":"import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n  let {\n    tickets\n  } = ticketList;\n  const icon_1 = ' ₽';\n  tickets.price = tickets.map(elem => elem.price + icon_1);\n  return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n};\n\nconst defaultState = {\n  currency: \"USD\",\n  tickets: [...getDefaultTickets()].map(elem => elem.price + ' ₽'),\n  filters: [{\n    id: 0,\n    label: 'Без пересадок',\n    checked: true\n  }, {\n    id: 1,\n    label: '1 пересадка',\n    checked: true\n  }, {\n    id: 2,\n    label: '2 пересадки',\n    checked: true\n  }, {\n    id: 3,\n    label: '3 пересадки',\n    checked: true\n  }]\n}; // $ € ₽\n\nfunction currencyReducer(state = defaultState, action) {\n  switch (action.type) {\n    case actionNames.CURRENCY_CHANGE:\n      const icon_1 = ' ₽';\n      const icon_2 = ' €';\n      const icon_3 = ' $';\n      const {\n        currencyName\n      } = action;\n      let tickets = [...getDefaultTickets()];\n\n      if (currencyName === \"USD\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: String(Math.trunc(ticket.price / 76)) + icon_3\n        }));\n      }\n\n      if (currencyName === \"EUR\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: String(Math.trunc(ticket.price / 86)) + icon_2\n        }));\n      }\n\n      if (currencyName === \"RUB\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: String(ticket.price) + icon_1\n        }));\n      }\n\n      return { ...state,\n        currency: currencyName,\n        tickets\n      };\n\n    case actionNames.FILTERS:\n      const {\n        filterName\n      } = action;\n      const newFilters = state.filters.map(filter => {\n        if (filter.id === filterName) return { ...filter,\n          checked: !filter.checked\n        };\n        return { ...filter\n        };\n      });\n      const newTickets = [...getDefaultTickets()].filter(ticket => newFilters.find(filter => filter.id === ticket.stops).checked);\n      return { ...state,\n        filters: newFilters,\n        tickets: newTickets\n      };\n\n    case actionNames.CHECK_ALL:\n      const {\n        toggleCheckAllName\n      } = action;\n      let allChecked = state.filters;\n\n      if (toggleCheckAllName === 'All') {\n        allChecked = allChecked.map(filter => ({ ...filter,\n          checked: !allChecked.checked\n        }));\n      }\n\n      return { ...state,\n        filters: allChecked,\n        tickets: [...defaultState.tickets]\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default currencyReducer;","map":{"version":3,"sources":["/home/smissuser21/React_Project/aviasales/avias/src/Redux/currencyReducer.js"],"names":["actionNames","ticketList","getDefaultTickets","tickets","icon_1","price","map","elem","sort","a","b","defaultState","currency","filters","id","label","checked","currencyReducer","state","action","type","CURRENCY_CHANGE","icon_2","icon_3","currencyName","ticket","String","Math","trunc","FILTERS","filterName","newFilters","filter","newTickets","find","stops","CHECK_ALL","toggleCheckAllName","allChecked"],"mappings":"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","sourcesContent":["import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n    let { tickets } = ticketList;\n    const icon_1 = ' ₽';\n    tickets.price = tickets.map((elem) => elem.price + icon_1)\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n}\n\nconst defaultState = {\n    currency: \"USD\",\n    tickets: [...getDefaultTickets()].map((elem) => elem.price + ' ₽'),\n    filters: [\n        { id: 0, label: 'Без пересадок', checked: true },\n        { id: 1, label: '1 пересадка',  checked: true },\n        { id: 2, label: '2 пересадки',  checked: true },\n        { id: 3, label: '3 пересадки',  checked: true }\n    ],\n}\n\n// $ € ₽\n\nfunction currencyReducer (state = defaultState, action) {\n    switch(action.type) {\n        case actionNames.CURRENCY_CHANGE:\n            const icon_1 = ' ₽';\n            const icon_2 = ' €';\n            const icon_3 = ' $';\n            const { currencyName } = action;\n            let tickets = [...getDefaultTickets()];\n        \n\n            if (currencyName === \"USD\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: String(Math.trunc(ticket.price / 76)) + icon_3}))\n            }\n            if (currencyName === \"EUR\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: String(Math.trunc(ticket.price / 86)) + icon_2}))\n            }\n            if (currencyName === \"RUB\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: String(ticket.price) + icon_1}))\n            }\n            return {...state, currency: currencyName, tickets }\n        \n        case actionNames.FILTERS: \n            const { filterName } = action;\n            const newFilters = state.filters.map((filter) => {\n                if (filter.id === filterName) return {...filter, checked: !filter.checked};\n                return {...filter}\n            })\n            const newTickets = [...getDefaultTickets()].filter(ticket => newFilters.find(filter => filter.id === ticket.stops).checked)\n                return {...state, filters: newFilters, tickets: newTickets }\n\n        case actionNames.CHECK_ALL:\n            const { toggleCheckAllName } = action;\n            let allChecked = state.filters;\n            if (toggleCheckAllName === 'All') {\n               allChecked = allChecked.map((filter) => ({...filter, checked: !allChecked.checked}))\n            }\n            return {...state, filters: allChecked, tickets: [...defaultState.tickets]}\n        default:\n            return {...state};  \n    }\n}\n\nexport default currencyReducer;\n"]},"metadata":{},"sourceType":"module"}