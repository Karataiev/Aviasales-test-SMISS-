{"ast":null,"code":"import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\nimport { filterActions } from \"./actions\";\n\nconst getDefaultTickets = () => {\n  const {\n    tickets\n  } = ticketList;\n  return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n};\n\nlet defaultState = {\n  currency: \"USD\",\n  tickets: [...getDefaultTickets()],\n  filters: [{\n    id: \"All\",\n    name: \"all\",\n    label: 'Без пересадок',\n    checked: false\n  }, {\n    id: \"1\",\n    name: \"name1\",\n    label: '1 пересадка',\n    checked: false\n  }, {\n    id: \"2\",\n    name: \"name2\",\n    label: '2 пересадка',\n    checked: false\n  }, {\n    id: \"3\",\n    name: \"name3\",\n    label: '3 пересадка',\n    checked: true\n  }, {\n    id: \"4\",\n    name: \"name4\",\n    label: '4 пересадка',\n    checked: false\n  }]\n};\n\nfunction currencyReducer(state = defaultState, action) {\n  console.log('REDUCER', state, action);\n\n  switch (action.type) {\n    case actionNames.CURRENCY_CHANGE:\n      const {\n        currencyName\n      } = action;\n      let tickets = [...getDefaultTickets()];\n\n      if (currencyName === \"USD\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 76)\n        }));\n      } else if (currencyName === \"EUR\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 86)\n        }));\n      }\n\n      return { ...state,\n        currency: currencyName,\n        tickets\n      };\n\n    case actionNames.FILTERS:\n      const {\n        filterName\n      } = action;\n      const newFilters = state.filters.map(filter => {\n        if (filter.id === filterName) return { ...filter,\n          checked: !filter.checked\n        };\n        return { ...filter\n        };\n      }); // function changeFilter (id) {\n      //     defaultState.filters = defaultState.filters.map(item => {\n      //         if(item.id === id) {\n      //             item.completed = !item.completed\n      //         }\n      //         return item\n      //     })\n      // }\n      // const ticketsFilter = state.tickets.filter((ticket) => {\n      //     return newFilters.some(filter => filter === ticket.stops)\n      // });\n\n      return { ...state,\n        filters: newFilters\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default currencyReducer;","map":{"version":3,"sources":["/home/smissuser21/React_Project/aviasales/avias/src/Redux/currencyReducer.js"],"names":["actionNames","ticketList","filterActions","getDefaultTickets","tickets","sort","a","b","price","defaultState","currency","filters","id","name","label","checked","currencyReducer","state","action","console","log","type","CURRENCY_CHANGE","currencyName","map","ticket","Math","trunc","FILTERS","filterName","newFilters","filter"],"mappings":"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","sourcesContent":["import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\nimport { filterActions } from \"./actions\";\n\nconst getDefaultTickets = () => {\n    const { tickets } = ticketList;\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n}\n\nlet defaultState = {\n    currency: \"USD\",\n    tickets: [...getDefaultTickets()],\n    filters: [\n        { id: \"All\", name: \"all\", label: 'Без пересадок', checked: false },\n        { id: \"1\", name: \"name1\", label: '1 пересадка', checked: false },\n        { id: \"2\", name: \"name2\",label: '2 пересадка',  checked: false },\n        { id: \"3\", name: \"name3\",label: '3 пересадка',  checked: true },\n        { id: \"4\", name: \"name4\",label: '4 пересадка',  checked: false }\n    ]\n}\n\nfunction currencyReducer (state = defaultState, action) {\n    console.log('REDUCER', state, action);\n    switch(action.type) {\n        case actionNames.CURRENCY_CHANGE:\n            const { currencyName } = action;\n            let tickets = [...getDefaultTickets()];\n            if (currencyName === \"USD\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 76)}))\n            } else if (currencyName === \"EUR\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 86)}))\n            }\n            return {...state, currency: currencyName, tickets }\n        \n        case actionNames.FILTERS: \n            const { filterName } = action;\n            const newFilters = state.filters.map((filter) => {\n                if (filter.id === filterName) return {...filter, checked: !filter.checked};\n                return {...filter}\n            })\n            \n            // function changeFilter (id) {\n            //     defaultState.filters = defaultState.filters.map(item => {\n            //         if(item.id === id) {\n            //             item.completed = !item.completed\n            //         }\n            //         return item\n            //     })\n            // }\n\n            // const ticketsFilter = state.tickets.filter((ticket) => {\n            //     return newFilters.some(filter => filter === ticket.stops)\n            // });\n\n            return {...state, filters: newFilters}\n        \n        default:\n            return {...state};  \n    }\n}\n\nexport default currencyReducer;"]},"metadata":{},"sourceType":"module"}