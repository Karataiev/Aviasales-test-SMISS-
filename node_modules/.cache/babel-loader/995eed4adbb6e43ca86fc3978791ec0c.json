{"ast":null,"code":"import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n  const {\n    tickets\n  } = ticketList;\n  return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n};\n\nlet defaultState = {\n  currency: \"USD\",\n  tickets: [...getDefaultTickets()],\n  filters: [{\n    id: \"1\",\n    name: \"name1\",\n    label: 'Без пересадок',\n    checked: false\n  }, {\n    id: \"2\",\n    name: \"name2\",\n    label: '1 пересадка',\n    checked: false\n  }, {\n    id: \"3\",\n    name: \"name3\",\n    label: '2 пересадки',\n    checked: false\n  }, {\n    id: \"4\",\n    name: \"name4\",\n    label: '3 пересадки',\n    checked: false\n  }],\n  filterTickets: [{\n    label: \"Все\",\n    id: 1,\n    isChecked: false\n  }, {\n    label: \"Без пересадок\",\n    id: 2,\n    isChecked: false\n  }, {\n    label: \"1 пересадка\",\n    id: 3,\n    isChecked: false\n  }, {\n    label: \"2 пересадки\",\n    id: 4,\n    isChecked: false\n  }, {\n    label: \"3 пересадки\",\n    id: 5,\n    isChecked: false\n  }]\n};\n\nfunction currencyReducer(state = defaultState, action) {\n  console.log('REDUCER', state, action);\n\n  switch (action.type) {\n    case actionNames.CURRENCY_CHANGE:\n      const {\n        currencyName\n      } = action;\n      let tickets = [...getDefaultTickets()];\n\n      if (currencyName === \"USD\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 76)\n        }));\n      } else if (currencyName === \"EUR\") {\n        tickets = tickets.map(ticket => ({ ...ticket,\n          price: Math.trunc(ticket.price / 86)\n        }));\n      }\n\n      return { ...state,\n        currency: currencyName,\n        tickets\n      };\n\n    case actionNames.FILTERS:\n      const {\n        filterName\n      } = action;\n      const newFilters = state.filters.map(filter => {\n        if (filter.id === filterName) return { ...filter,\n          checked: !filter.checked\n        };\n        return { ...filter\n        };\n      });\n      return { ...state,\n        filters: newFilters\n      };\n\n    case actionNames.CHECK_ALL:\n      const {\n        toggleCheckAllName\n      } = action;\n      let filtersAll = state.filters;\n\n      if (toggleCheckAllName === 'All') {\n        filtersAll = filtersAll.map(filter => ({ ...filter,\n          checked: !filter.checked\n        }));\n      }\n\n      return { ...state,\n        filters: filtersAll,\n        toggle: toggleCheckAllName\n      };\n\n    case 'CHECKED_TICKETS':\n      if (action.id === 1) {\n        if (state.filterTickets[0].isChecked === false) {\n          return state.filterTickets.map(el => ({ ...el,\n            isChecked: true\n          }));\n        } else {\n          return state.filterTickets.map(el => ({ ...el,\n            isChecked: false\n          }));\n        }\n      }\n\n      if (state[0].isChecked === false) {\n        const index = state.filterTickets.findIndex(el => el.id === action.id);\n        const oldItem = state.filterTickets[index];\n        const newItem = { ...oldItem,\n          isChecked: !oldItem.isChecked\n        };\n        return [...state.filterTickets.slice(0, index), newItem, ...state.filterTickets.slice(index + 1)];\n      } else {\n        const index = state.filterTickets.findIndex(el => el.id === action.id);\n        const oldItem = state.filterTickets[index];\n        const allOldItem = state.filterTickets[0];\n        const allNewItem = { ...allOldItem,\n          isChecked: false\n        };\n        const newItem = { ...oldItem,\n          isChecked: !oldItem.isChecked\n        };\n        return [allNewItem, ...state.filterTickets.slice(1, index), newItem, ...state.filterTickets.slice(index + 1)];\n      }\n\n    // const ticketsFilter = state.tickets.filter((ticket) => {\n    //     return newFilters.some(filter => filter === ticket.stops)\n    // });\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default currencyReducer;","map":{"version":3,"sources":["/home/smissuser21/React_Project/aviasales/avias/src/Redux/currencyReducer.js"],"names":["actionNames","ticketList","getDefaultTickets","tickets","sort","a","b","price","defaultState","currency","filters","id","name","label","checked","filterTickets","isChecked","currencyReducer","state","action","console","log","type","CURRENCY_CHANGE","currencyName","map","ticket","Math","trunc","FILTERS","filterName","newFilters","filter","CHECK_ALL","toggleCheckAllName","filtersAll","toggle","el","index","findIndex","oldItem","newItem","slice","allOldItem","allNewItem"],"mappings":"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","sourcesContent":["import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n    const { tickets } = ticketList;\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n}\n\nlet defaultState = {\n    currency: \"USD\",\n    tickets: [...getDefaultTickets()],\n    filters: [\n        { id: \"1\", name: \"name1\", label: 'Без пересадок', checked: false },\n        { id: \"2\", name: \"name2\",label: '1 пересадка',  checked: false },\n        { id: \"3\", name: \"name3\",label: '2 пересадки',  checked: false },\n        { id: \"4\", name: \"name4\",label: '3 пересадки',  checked: false }\n    ],\n    filterTickets: [\n        {label: \"Все\", id:1, isChecked: false},\n        {label: \"Без пересадок\", id:2, isChecked: false},\n        {label: \"1 пересадка\", id:3, isChecked: false},\n        {label: \"2 пересадки\", id:4, isChecked: false},\n        {label: \"3 пересадки\", id:5, isChecked: false},\n    ]\n}\n\nfunction currencyReducer (state = defaultState, action) {\n    console.log('REDUCER', state, action);\n    switch(action.type) {\n        case actionNames.CURRENCY_CHANGE:\n            const { currencyName } = action;\n            let tickets = [...getDefaultTickets()];\n            if (currencyName === \"USD\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 76)}))\n            } else if (currencyName === \"EUR\") {\n                tickets = tickets.map((ticket) => ({...ticket, price: Math.trunc(ticket.price / 86)}))\n            }\n            return {...state, currency: currencyName, tickets }\n        \n        case actionNames.FILTERS: \n            const { filterName } = action;\n            const newFilters = state.filters.map((filter) => {\n                if (filter.id === filterName) return {...filter, checked: !filter.checked};\n                return {...filter}\n            })\n                return {...state, filters: newFilters}\n\n        case actionNames.CHECK_ALL:\n            const { toggleCheckAllName } = action;\n            let filtersAll = state.filters;\n            if (toggleCheckAllName === 'All') {\n                filtersAll = filtersAll.map((filter) => ({...filter, checked: !filter.checked}))\n            }\n            return {...state, filters: filtersAll, toggle: toggleCheckAllName }\n\n\n        case 'CHECKED_TICKETS':\n            if (action.id === 1) {\n                if (state.filterTickets[0].isChecked === false) {\n                    return state.filterTickets.map(el => ({...el, isChecked: true}))\n                } else {\n                    return state.filterTickets.map(el => ({...el, isChecked: false}))\n                }\n            }\n            if (state[0].isChecked === false) {\n                const index = state.filterTickets.findIndex((el) => el.id === action.id)\n                const oldItem = state.filterTickets[index]\n                const newItem = {...oldItem, isChecked: !oldItem.isChecked }\n                return [...state.filterTickets.slice(0, index), newItem, ...state.filterTickets.slice(index + 1)]\n            } else {\n                const index = state.filterTickets.findIndex((el) => el.id === action.id)\n                const oldItem = state.filterTickets[index]\n                const allOldItem = state.filterTickets[0]\n                const allNewItem = {...allOldItem, isChecked: false}\n                const newItem = {...oldItem, isChecked: !oldItem.isChecked }\n                return [allNewItem, ...state.filterTickets.slice(1, index), newItem, ...state.filterTickets.slice(index + 1)]\n            }\n            // const ticketsFilter = state.tickets.filter((ticket) => {\n            //     return newFilters.some(filter => filter === ticket.stops)\n            // });\n\n        default:\n            return {...state};  \n    }\n}\n\nexport default currencyReducer;\n"]},"metadata":{},"sourceType":"module"}