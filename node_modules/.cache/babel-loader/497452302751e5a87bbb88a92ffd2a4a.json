{"ast":null,"code":"import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n  let {\n    tickets\n  } = ticketList;\n  return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n};\n\nconst defaultState = {\n  currency: \"RUB\",\n  tickets: [...getDefaultTickets()],\n  filters: [{\n    id: 0,\n    label: 'Без пересадок',\n    checked: true\n  }, {\n    id: 1,\n    label: '1 пересадка',\n    checked: true\n  }, {\n    id: 2,\n    label: '2 пересадки',\n    checked: true\n  }, {\n    id: 3,\n    label: '3 пересадки',\n    checked: true\n  }],\n  exchangeRates: {\n    USD: 0.013612,\n    EUR: 0.011612\n  }\n};\n\nfunction currencyReducer(state = defaultState, action) {\n  switch (action.type) {\n    case actionNames.CURRENCY_CHANGE:\n      const {\n        currencyName\n      } = action;\n      let tickets = [...getDefaultTickets()];\n      let ticketsUSD = tickets.map(ticket => ({ ...ticket,\n        price: ~~(ticket.price * state.exchangeRates.USD)\n      }));\n      let ticketsEUR = tickets.map(ticket => ({ ...ticket,\n        price: ~~(ticket.price * state.exchangeRates.EUR)\n      })) // if (currencyName === \"USD\") {\n      //     tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.USD)}))\n      // }\n      // if (currencyName === \"EUR\") {\n      //     tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.EUR)}))\n      // } else {\n      //     tickets = tickets.map((ticket) => ({...ticket, price: ticket.price}))\n      // }\n      (currencyName === \"USD\") ? tickets = tickets.map(ticket => ({ ...ticket,\n        price: ~~(ticket.price * state.exchangeRates.USD)\n      })) : currencyName === \"EUR\" ? tickets = tickets.map(ticket => ({ ...ticket,\n        price: ~~(ticket.price * state.exchangeRates.EUR)\n      })) : tickets = tickets.map(ticket => ({ ...ticket,\n        price: ticket.price\n      }));\n      return { ...state,\n        currency: currencyName,\n        tickets\n      };\n\n    case actionNames.EXCHANGE_RATES:\n      const {\n        exchangeRates\n      } = action;\n      return { ...state,\n        exchangeRates\n      };\n\n    case actionNames.FILTERS:\n      const {\n        filterName\n      } = action;\n      const newFilters = state.filters.map(filter => {\n        if (filter.id === filterName) return { ...filter,\n          checked: !filter.checked\n        };\n        return { ...filter\n        };\n      });\n      const newTickets = [...getDefaultTickets()].filter(ticket => newFilters.find(filter => filter.id === ticket.stops).checked);\n      return { ...state,\n        filters: newFilters,\n        tickets: newTickets\n      };\n\n    case actionNames.ONLY_FILTER:\n      const {\n        onlyFilter\n      } = action;\n      let onlyChecked = state.filters;\n      onlyChecked = onlyChecked.map(filter => ({ ...filter,\n        checked: onlyFilter === filter.id\n      }));\n      const newTickets_2 = [...getDefaultTickets()].filter(ticket => onlyChecked.find(filter => filter.id === ticket.stops).checked);\n      return { ...state,\n        filters: onlyChecked,\n        tickets: newTickets_2\n      };\n\n    case actionNames.CHECK_ALL:\n      const {\n        toggleCheckAllName\n      } = action;\n      let allChecked = state.filters;\n\n      if (toggleCheckAllName === 'All') {\n        allChecked = allChecked.map(filter => ({ ...filter,\n          checked: !allChecked.checked\n        }));\n      }\n\n      return { ...state,\n        filters: allChecked,\n        tickets: [...defaultState.tickets]\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default currencyReducer;","map":{"version":3,"sources":["/home/smissuser21/React_Project/aviasales/src/Redux/currencyReducer.js"],"names":["actionNames","ticketList","getDefaultTickets","tickets","sort","a","b","price","defaultState","currency","filters","id","label","checked","exchangeRates","USD","EUR","currencyReducer","state","action","type","CURRENCY_CHANGE","currencyName","ticketsUSD","map","ticket","ticketsEUR","EXCHANGE_RATES","FILTERS","filterName","newFilters","filter","newTickets","find","stops","ONLY_FILTER","onlyFilter","onlyChecked","newTickets_2","CHECK_ALL","toggleCheckAllName","allChecked"],"mappings":"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","sourcesContent":["import actionNames from \"./actionNames\";\nimport ticketList from '../Components/ticketList.json';\n\nconst getDefaultTickets = () => {\n    let { tickets } = ticketList;\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\n}\n\nconst defaultState = {\n    currency: \"RUB\",\n    tickets: [...getDefaultTickets()],\n    filters: [\n        { id: 0, label: 'Без пересадок', checked: true },\n        { id: 1, label: '1 пересадка',  checked: true },\n        { id: 2, label: '2 пересадки',  checked: true },\n        { id: 3, label: '3 пересадки',  checked: true }\n    ],\n    exchangeRates: {\n        USD: 0.013612,\n        EUR: 0.011612\n    },\n}\n\nfunction currencyReducer (state = defaultState, action) {\n    switch(action.type) {\n        case actionNames.CURRENCY_CHANGE:\n            const { currencyName } = action;\n            let tickets = [...getDefaultTickets()];\n\n            let ticketsUSD = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.USD)}));\n            let ticketsEUR = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.EUR)}))\n\n            // if (currencyName === \"USD\") {\n            //     tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.USD)}))\n            // }\n            // if (currencyName === \"EUR\") {\n            //     tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.EUR)}))\n            // } else {\n            //     tickets = tickets.map((ticket) => ({...ticket, price: ticket.price}))\n            // }\n\n\n\n          \n\n\n            (currencyName === \"USD\") ? tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.USD)})) :\n            (currencyName === \"EUR\") ? tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates.EUR)})) :\n            tickets = tickets.map((ticket) => ({...ticket, price: ticket.price}))\n\n            return {...state, currency: currencyName, tickets}\n\n        case actionNames.EXCHANGE_RATES: \n            const { exchangeRates } = action;\n            return {...state, exchangeRates}\n\n        case actionNames.FILTERS: \n            const { filterName } = action;\n            const newFilters = state.filters.map((filter) => {\n                if (filter.id === filterName) return {...filter, checked: !filter.checked};\n                return {...filter}\n            })\n            const newTickets = [...getDefaultTickets()].filter((ticket) => newFilters.find(filter => filter.id === ticket.stops).checked)\n                return {...state, filters: newFilters, tickets: newTickets }\n       \n        case actionNames.ONLY_FILTER:\n            const { onlyFilter } = action;\n            let onlyChecked = state.filters;\n            onlyChecked = onlyChecked.map((filter) => ({...filter, checked: onlyFilter === filter.id}))\n            \n            const newTickets_2 = [...getDefaultTickets()].filter((ticket) => onlyChecked.find(filter => filter.id === ticket.stops).checked)\n                return {...state, filters: onlyChecked, tickets: newTickets_2 }\n        \n        case actionNames.CHECK_ALL:\n            const { toggleCheckAllName } = action;\n            let allChecked = state.filters;\n            if (toggleCheckAllName === 'All') {\n               allChecked = allChecked.map((filter) => ({...filter, checked: !allChecked.checked}))\n            }\n            return {...state, filters: allChecked, tickets: [...defaultState.tickets]}\n\n        default:\n            return {...state};  \n    }\n}\n\nexport default currencyReducer;\n"]},"metadata":{},"sourceType":"module"}